<app-product-info></app-product-info>
  <!-- Reviews-->
  <div class="row pt-2 pb-3">
    <div class="col-lg-4 col-md-5">
      <h2 class="h3 mb-4">{{productReviews?.totalReview}} Reviews</h2>
      <app-star-rating [rating] = "productReviews?.averageRating"></app-star-rating>
      <p class="pt-3 font-size-sm text-muted">{{productReviews?.recommended}} out of {{productReviews?.totalReview}} ({{getPercentage(productReviews?.totalReview,productReviews?.recommended)}})%<br>Customers recommended this product</p>
    </div>
    <div class="col-lg-8 col-md-7">
      <div class="d-flex align-items-center mb-2">
        <div class="text-nowrap mr-3"><span class="d-inline-block align-middle text-muted">5</span><i class="czi-star-filled font-size-xs ml-1"></i></div>
        <div class="w-100">
          <div class="progress" style="height: 4px;">
            <div class="progress-bar bg-success" role="progressbar" [ngStyle]="setMyStyles(productReviews?.totalReview, productReviews?.five)"  aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div><span class="text-muted ml-3">{{productReviews?.five}}</span>
      </div>
      <div class="d-flex align-items-center mb-2">
        <div class="text-nowrap mr-3"><span class="d-inline-block align-middle text-muted">4</span><i class="czi-star-filled font-size-xs ml-1"></i></div>
        <div class="w-100">
          <div class="progress" style="height: 4px;">
            <div class="progress-bar" role="progressbar"  [ngStyle]="setMyStyles(productReviews?.totalReview, productReviews?.four)"  style="background-color: #a7e453;" aria-valuenow="27" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div><span class="text-muted ml-3">{{productReviews?.four}}</span>
      </div>
      <div class="d-flex align-items-center mb-2">
        <div class="text-nowrap mr-3"><span class="d-inline-block align-middle text-muted">3</span><i class="czi-star-filled font-size-xs ml-1"></i></div>
        <div class="w-100">
          <div class="progress" style="height: 4px;">
            <div class="progress-bar" role="progressbar"  [ngStyle]="setMyStyles(productReviews?.totalReview, productReviews?.three)" style="background-color: #ffda75;" aria-valuenow="17" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div><span class="text-muted ml-3">{{productReviews?.three}}</span>
      </div>
      <div class="d-flex align-items-center mb-2">
        <div class="text-nowrap mr-3"><span class="d-inline-block align-middle text-muted">2</span><i class="czi-star-filled font-size-xs ml-1"></i></div>
        <div class="w-100">
          <div class="progress" style="height: 4px;">
            <div class="progress-bar" role="progressbar" [ngStyle]="setMyStyles(productReviews?.totalReview, productReviews?.two)" style="background-color: #fea569;" aria-valuenow="9" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div><span class="text-muted ml-3">{{productReviews?.two}}</span>
      </div>
      <div class="d-flex align-items-center">
        <div class="text-nowrap mr-3"><span class="d-inline-block align-middle text-muted">1</span><i class="czi-star-filled font-size-xs ml-1"></i></div>
        <div class="w-100">
          <div class="progress" style="height: 4px;">
            <div class="progress-bar bg-danger" role="progressbar"  [ngStyle]="setMyStyles(productReviews?.totalReview, productReviews?.one)"  aria-valuenow="4" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div><span class="text-muted ml-3">{{productReviews?.one}}</span>
      </div>
    </div>
  </div>
  <hr class="mt-4 pb-4 mb-3">
  <div class="row pb-4">
    <!-- Reviews list-->
    <div class="col-md-7">
      <div class="d-flex justify-content-end pb-4">
        <div class="form-inline flex-nowrap">
          <label class="text-muted text-nowrap mr-2 d-none d-sm-block" for="sort-reviews">Sort by:</label>
          <select class="custom-select custom-select-sm" id="sort-reviews">
            <option>Newest</option>
            <option>Oldest</option>
            <option>Popular</option>
            <option>High rating</option>
            <option>Low rating</option>
          </select>
        </div>
      </div>
      <!-- Review-->
      <div class="product-review pb-4 mb-4 border-bottom" *ngFor="let usr of userReviews"> 
        <div class="d-flex mb-3">
          <div class="media media-ie-fix align-items-center mr-4 pr-2"><img class="rounded-circle" width="50" [src]="usr?.profileImg" alt="Rafael Marquez"/>
            <div class="media-body pl-3">
              <h6 class="font-size-sm mb-0">{{usr?.userName}}</h6><span class="font-size-ms text-muted">June 28, 2019</span>
            </div>
          </div>
          <div>
              <app-star-rating [rating] = "usr?.rating"></app-star-rating>

            <div class="font-size-ms text-muted">{{usr?.helpful}}% of users found this review helpful</div>
          </div>
        </div>
        <p class="font-size-md mb-2">{{usr?.review}}</p>
        <ul class="list-unstyled font-size-ms pt-1">
          <li class="mb-1"><span class="font-weight-medium">Pros:&nbsp;</span>{{usr?.pros}}</li>
          <li class="mb-1"><span class="font-weight-medium">Cons:&nbsp;</span>{{usr?.cons}}</li>
        </ul>
        <div class="text-nowrap">
          <button class="btn-like" type="button">{{usr?.like}}</button>
          <button class="btn-dislike" type="button">{{usr?.unlike}}</button>
        </div>
      </div>
      
      <div class="text-center">
        <button class="btn btn-outline-accent" type="button"><i class="czi-reload mr-2"></i>Load more reviews</button>
      </div>
    </div>
    <!-- Leave review form-->
    <div class="col-md-5 mt-2 pt-4 mt-md-0 pt-md-0">
      <div class="bg-secondary py-grid-gutter px-grid-gutter rounded-lg">
        <h3 class="h4 pb-2">Write a review</h3>
        <form class="needs-validation" method="post" novalidate>
          <div class="form-group">
            <label for="review-name">Your name<span class="text-danger">*</span></label>
            <input class="form-control" type="text" required id="review-name">
            <div class="invalid-feedback">Please enter your name!</div><small class="form-text text-muted">Will be displayed on the comment.</small>
          </div>
          <div class="form-group">
            <label for="review-email">Your email<span class="text-danger">*</span></label>
            <input class="form-control" type="email" required id="review-email">
            <div class="invalid-feedback">Please provide valid email address!</div><small class="form-text text-muted">Authentication only - we won't spam you.</small>
          </div>
          <div class="form-group">
            <label for="review-rating">Rating<span class="text-danger">*</span></label>
            <select class="custom-select" required id="review-rating">
              <option value="">Choose rating</option>
              <option value="5">5 stars</option>
              <option value="4">4 stars</option>
              <option value="3">3 stars</option>
              <option value="2">2 stars</option>
              <option value="1">1 star</option>
            </select>
            <div class="invalid-feedback">Please choose rating!</div>
          </div>
          <div class="form-group">
            <label for="review-text">Review<span class="text-danger">*</span></label>
            <textarea class="form-control" rows="6" required id="review-text"></textarea>
            <div class="invalid-feedback">Please write a review!</div><small class="form-text text-muted">Your review must be at least 50 characters.</small>
          </div>
          <div class="form-group">
            <label for="review-pros">Pros</label>
            <textarea class="form-control" rows="2" placeholder="Separated by commas" id="review-pros"></textarea>
          </div>
          <div class="form-group mb-4">
            <label for="review-cons">Cons</label>
            <textarea class="form-control" rows="2" placeholder="Separated by commas" id="review-cons"></textarea>
          </div>
          <button class="btn btn-primary btn-shadow btn-block" type="submit">Submit a Review</button>
        </form>
      </div>
    </div>
  </div>